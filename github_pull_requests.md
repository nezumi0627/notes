# GitHub Pull Request 完全ガイド

## 目次
- [Pull Requestとは](#pull-requestとは)
- [基本的な使い方](#基本的な使い方)
- [効果的なPR管理](#効果的なpr管理)
- [レビュープロセス](#レビュープロセス)
- [コードレビュー](#コードレビュー)
- [自動化とCI/CD](#自動化とcicd)
- [ベストプラクティス](#ベストプラクティス)
- [高度な機能](#高度な機能)

## Pull Requestとは

Pull Request（PR）は、コードの変更を提案し、レビューを受けるためのGitHubの機能です。チーム開発において、コードの品質を保ち、知識共有を促進する重要な役割を果たします。

### 主な用途
- 新機能の追加提案
- バグ修正の提案
- コードの改善提案
- ドキュメントの更新
- 設定変更の提案

## 基本的な使い方

### 1. PRの作成手順
1. 変更用のブランチを作成
```bash
git checkout -b feature/new-feature
```

2. 変更を加えてコミット
```bash
git add .
git commit -m "Add new feature"
```

3. ブランチをプッシュ
```bash
git push origin feature/new-feature
```

4. GitHubでPRを作成
   - 「Compare & pull request」ボタンをクリック
   - タイトルと説明を入力
   - レビュアーを指定
   - 「Create pull request」をクリック

### 2. PRの記述テンプレート
```markdown
## 変更の概要
[変更内容の簡潔な説明]

## 変更の理由
[なぜこの変更が必要か]

## 変更の詳細
- [具体的な変更点1]
- [具体的な変更点2]
- [具体的な変更点3]

## テスト
- [ ] ユニットテスト
- [ ] ���合テスト
- [ ] E2Eテスト

## スクリーンショット
[UI変更がある場合]

## 関連Issue
Closes #[Issue番号]

## レビューポイント
[特に確認してほしい点]

## 影響範囲
[この変更による影響範囲]
```

## 効果的なPR管理

### 1. PRのサイズ
- 小さく保つ（理想は200行以下）
- 1つの機能や修正に集中
- レビューしやすい範囲に収める

### 2. ステータス管理
- Draft: 作業中
- Ready for review: レビュー待ち
- Changes requested: 修正依頼
- Approved: 承認済み
- Merged: マージ完了

### 3. ラベル管理
- `enhancement`: 機能追加
- `bug`: バグ修正
- `documentation`: ドキュメント
- `breaking-change`: 破壊的変更
- `ready-to-merge`: マージ準備完了

## レビュープロセス

### 1. レビュアーの役割
- コードの品質確認
- バグの早期発見
- 設計の一貫性確認
- 知識共有の促進

### 2. レビューのポイント
- コーディング規約の遵守
- テストの充実度
- パフォーマンスへの影響
- セキュリティ上の問題
- ドキュメントの更新

### 3. フィードバックの方法
- 建設的なコメント
- 具体的な改善案の提示
- 質問形式での提案
- 肯定的なフィードバック

## コー��レビュー

### 1. インラインコメント
```markdown
> 該当コード
このメソッドは複雑すぎるように見えます。
以下のように分割することを提案します：
```ruby
def method1
  # 処理1
end

def method2
  # 処理2
end
```
```

### 2. レビューコメントの種類
- 必須の修正: `[Required]`
- 提案: `[Suggestion]`
- 質問: `[Question]`
- 賞賛: `[Nice!]`

### 3. サジェスト機能
- コードの修正案を直接提案
- ワンクリックで適用可能
- 複数行の修正も可能

## 自動化とCI/CD

### 1. 自動チェック
- リンター
- テスト実行
- カバレッジ確認
- セキュリティスキャン

### 2. 必須ステータスチェック
- CI/CDパイプラインの成功
- 必要なレビュー承認数
- ブランチの最新化

### 3. 自動マージ
- すべてのチェックパス時
- 承認条件満足時
- コンフリクトなし確認

## ベストプラクティス

### 1. PRのタイトル
```
feat: Add new user registration
fix: Correct email validation
docs: Update API documentation
refactor: Simplify authentication logic
```

### 2. コミットメッセージ
- 明確で簡潔な説明
- 変更の理由を含める
- 関連Issueへの参照

### 3. レビュー効率化
- 事前レビュー準��
- WIPラベルの活用
- 適切なタイミングでのレビュー依頼

## 高度な機能

### 1. Draft Pull Request
- 作業中のPRを明示
- 早期フィードバック
- 不用意なマージ防止

### 2. レビュー必須設定
- 保護されたブランチ
- 必要承認数の設定
- 特定チームの承認要件

### 3. マージオプション
- Merge commit
- Squash and merge
- Rebase and merge

### 4. PRテンプレートの自動化
`.github/pull_request_template.md` の作成：

```markdown
## 概要
<!-- 変更の概要を書いてください -->

## 変更内容
<!-- 具体的な変更内容を箇条書きで -->
- 

## 関連Issue
<!-- 関連するIssueがあれば記載 -->
fixes #

## レビューポイント
<!-- レビュワーに特に見てほしい点 -->
- 

## スクリーンショット
<!-- UI変更がある場合 -->

## テスト
<!-- テスト項目と結果 -->
- [ ] 
``` 